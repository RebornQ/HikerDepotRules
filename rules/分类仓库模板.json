{
  "title": "分类仓库模板",
  "author": "Reborn",
  "version": 7,
  "updateText": "1.‘‘优化’’：直链仓库迁移至Github",
  "tips": "‘‘新功能’’:搜索仓库规则，需仓库管理者自行配置搜索解析仓库列表",
  "rule": "rule://5rW36ZiU6KeG55WM6KeE5YiZ5YiG5Lqr77yM5b2T5YmN5YiG5Lqr55qE5piv77ya6aaW6aG16aKR6YGT77yMUmVib3Ju77+laG9tZV9ydWxl77+leyJmaXJzdEhlYWRlciI6ImNsYXNzIiwidGl0bGUiOiLliIbnsbvku5PlupPmqKHmnb8iLCJhdXRob3IiOiJSZWJvcm4iLCJ1cmwiOiJoaWtlcjovL2hvbWUjZnlBbGwiLCJ2ZXJzaW9uIjo3LCJjb2xfdHlwZSI6InRleHRfMSIsImNsYXNzX25hbWUiOiLnn63op4bpopEm5b2x6KeGJuWKqOa8qyIsImNsYXNzX3VybCI6IlJlYm9ybkBAYXBpVHlwZT0nMCdAQGZ1bGxVcmw9J2h0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9SZWJvcm5RL0hpa2VyUnVsZXMvY2xhc3Nlcy9ub1NuaWZmZXIvbWFuaWZlc3RfdmlkZW9fc2hvcnQuanNvbidcblxuJlJlYm9ybkBAYXBpVHlwZT0nMCdAQGZ1bGxVcmw9J2h0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9SZWJvcm5RL0hpa2VyUnVsZXMvY2xhc3Nlcy9ub1NuaWZmZXIvbWFuaWZlc3RfdmlkZW8uanNvbidcblxuJlJlYm9ybkBAYXBpVHlwZT0nMCdAQGZ1bGxVcmw9J2h0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9SZWJvcm5RL0hpa2VyUnVsZXMvY2xhc3Nlcy9ub1NuaWZmZXIvbWFuaWZlc3RfYW5pbWUuanNvbiciLCJhcmVhX25hbWUiOiIiLCJhcmVhX3VybCI6IiIsInNvcnRfbmFtZSI6IiIsInllYXJfbmFtZSI6IlvkvovlrZBd56eB5Lq65LuT5bqTJlvkvovlrZBd6Ieq5a6a5LmJ5paH5Lu25ZCNJlvkvovlrZBd6Z2e56CB5LqR5LuT5bqT6KeE5YiZIiwic29ydF91cmwiOiIiLCJ5ZWFyX3VybCI6IlJlYm9ybkBAUmVib3JuXzBAQEhpa2VyUnVsZXNQcml2YWN5QEBhY2Nlc3NfdG9rZW49JyoqKionXG5cbiZSZWJvcm5AQFJlYm9ybl8wQEBIaWtlclJ1bGVzRGVwb3RAQHJlbW90ZUZpbGVuYW1lPSd1cGRhdGVfMS5qc29uJ1xuXG4mUmVib3JuQEBhcGlUeXBlPScwJ0BAZnVsbFVybD0naHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L2doL1JlYm9yblEvSGlrZXJSdWxlcy9tYW5pZmVzdC5qc29uJyIsImZpbmRfcnVsZSI6ImpzOlxudmFyIHJlcyA9IHt9O1xudmFyIGQgPSBbXTtcbnZhciBtUnVsZSA9IEpTT04ucGFyc2UoZ2V0UnVsZSgpKTtcblxudmFyIHNldHRpbmdzID0ge1xuICAgIC8vIOWOi+e8qeaWh+acrOW8gOWFs++8jOWNs+inhOWImSDmj5DnpLov5pu05paw5pel5b+XIOS4jeepuuihjO+8jOS7peWQjuWPr+iDvei/mOacieWFtuS7llxuICAgIGNvbXByZXNzVGV4dDogZmFsc2UsXG4gICAgLy8g6K6+572uIHRydWUg5LiA6ZSu5YeA5YyW77yM6Zmk5LqG6KeE5YiZ5ZKM5LuT5bqT6YCa55+l77yM5ZWl5Lmf5LiN6KaBXG4gICAgaGlkZUFsbDogZmFsc2UsXG4gICAgLy8g6KeE5YiZ5pWw6YeP5pi+56S65byA5YWz77yM5LiN6ZyA6KaB5pi+56S66K+36K6+572u5Li6dHJ1ZVxuICAgIG5vUnVsZXNOdW06IGZhbHNlLFxuICAgIC8vIOaYr+WQpuWFgeiuuOi2hei/h+S4gOWumuinhOWImeaVsOWQjuaUueWPmOaYvuekuuagt+W8j++8jOm7mOiupOS4jeW8gOWQr++8jOimgeW8gOWni+ivt+iuvue9ruS4uiB0cnVlXG4gICAgbmVlZENoYW5nZVNob3dUeXBlOiBmYWxzZSxcbiAgICAvLyDorr7nva7mnIDlpKfmmL7npLrlrozmlbTmlofmnKznmoTop4TliJnmlbDvvIzlpKfkuo7orr7nva7lgLzliJnmmL7npLrkuLrmjInpkq7moLflvI8o6buY6K6kIHRleHRfMilcbiAgICBzaG93RnVsbFRleHRNYXg6IDEwLFxuICAgIC8vIOiuvue9rui2hei/h+WFgeiuuOaYvuekuuWujOaVtOaWh+acrOeahOinhOWImeaVsOWQjuaYvuekuueahOagt+W8j1xuICAgIG92ZXJNYXhTaG93VHlwZTogXCJ0ZXh0XzJcIixcbiAgICAvKipcbiAgICAgKiDop4TliJnmmKDlsITliJfooahcbiAgICAgKiDlt6bmnKzlnLDvvIzlj7Pov5znq6/vvIzmnKzlnLDmmKDlsITkuLrov5znq6/vvIzovr7liLDmm7/mjaLlhoXlrrnnmoTnm67nmoRcbiAgICAgKiDpnIDopoHlhajlkI3ljLnphY3pnIDopoHlnKjmmKDlsITooajkuK3liqDlhaV7IFwibWF0Y2hBbGxcIjogdHJ1ZSB9XG4gICAgICog77yI5rOo5oSP77yM56iL5bqP6YC76L6R5Li65YWI5pig5bCE5ZCO5omn6KGM5LiL6Z2i55qE5Yig6Zmk5qCH6K6w77yJXG4gICAgICovXG4gICAgcnVsZXNNYXBwaW5nOiBbXG4gICAgICAgIC8vIFt7XCJ0aXRsZVwiOiBcIuWXqOWThuWSqlwiLCBcImF1dGhvclwiOiBcIuWPkeeyqua2guWimVwifSwge1widGl0bGVcIjogXCLll6jlk5rlkqrlvbHop4ZcIiwgXCJhdXRob3JcIjogXCLlj5HnsqrmtoLloplcIn0sIHtcIm1hdGNoQWxsXCI6IHRydWV9XSxcbiAgICAgICAgLy8gW3tcInRpdGxlXCI6IFwi6aKE5ZGK54mHXCIsIFwiYXV0aG9yXCI6IFwiUmVib3JuXCJ9LCB7XCJ0aXRsZVwiOiBcIumihOWRiueJhyg/PeKAolJlKVwiLCBcImF1dGhvclwiOiBcIlJlYm9yblwifV0sXG4gICAgICAgIC8vIFt7XCJ0aXRsZVwiOiBcIumihOWRiueJh+KAolRcIiwgXCJhdXRob3JcIjogXCJSZWJvcm5cIn0sIHtcInRpdGxlXCI6IFwi6aKE5ZGK54mH4oCiUmVcIiwgXCJhdXRob3JcIjogXCJSZWJvcm5cIn0sIHtcIm1hdGNoQWxsXCI6IHRydWV9XSxcbiAgICAgICAgLy8gW3tcInRpdGxlXCI6IFwiLio/KD894oCiVClcIiwgXCJhdXRob3JcIjogXCJSZWJvcm5cIn0sIHtcInRpdGxlXCI6IFwiLio/KD894oCiUmUpXCIsIFwiYXV0aG9yXCI6IFwiUmVib3JuXCJ9XSxcbiAgICAgICAgLy8gW3tcInRpdGxlXCI6IFwiLio/KD894oCiQilcIiwgXCJhdXRob3JcIjogXCJSZWJvcm5cIn0sIHtcInRpdGxlXCI6IFwiLio/KD894oCiUmUpXCIsIFwiYXV0aG9yXCI6IFwiUmVib3JuXCJ9XVxuICAgIF0sXG4gICAgLy8g5LqR56uv6KeE5YiZ5pig5bCE5YiX6KGo6ZO+5o6l77yM5qC85byP5pivSlNPTuaVsOe7hO+8jOivt+iHquW3seiuvue9rlxuICAgIHJlbW90ZVJ1bGVzTWFwcGluZ1VybDogXCJcIixcblxuICAgIC8vIOWFpeaIj+W8gOWFs++8n++8iOa7keeove+8iS8vIOWIoOmZpOW8gOWFs++8jOS4jemcgOimgeWIoOmZpOivt+iuvue9ruS4umZhbHNlXG4gICAgbmVlZERlbFN5bWJvbDogdHJ1ZSxcbiAgICAvLyDoh6rooYzmt7vliqDopoHooqvliKDmjonnmoTmoIforrBcbiAgICBzeW1ib2xzOiBbXCLmoIforrAxXCIsIFwi5qCH6K6wMlwiXSxcblxuICAgIC8vIOmakOiXj+W8gOWFs++8jOS4jemcgOimgemakOiXj+ivt+iuvue9ruS4umZhbHNlXG4gICAgbmVlZEhpZGVSdWxlOiB0cnVlLFxuICAgIC8vIOiHquihjOa3u+WKoOimgemakOiXj+eahOagh+iusO+8jOagvOW8j+S4uu+8mlvmoIforrDlkI1dXG4gICAgaGlkZVN5bWJvbHM6IFtcIlvmqKHmnb9dXCIsIFwiW+acquWujOaIkF1cIl0sXG5cbiAgICAvLyDoi6XpnIDopoHlhbPpl63lv73nlaXmnKzmrKHmm7TmlrDor7forr7nva7kuLp0cnVlXG4gICAgbm9JZ25vcmVVcGRhdGU6IGZhbHNlLFxuICAgIC8vIOacrOWcsOW/veeVpeabtOaWsOWIl+ihqO+8jFxuICAgIC8vIOWGheWuueaooeadv+S4uiB7dGl0bGU6IFwi6KeE5YiZ5ZCNXCIsIGF1dGhvcjogXCLop4TliJnkvZzogIVcIn1cbiAgICBpZ25vcmVVcGRhdGVSdWxlTGlzdDogW1xuICAgICAgICAvLyB7dGl0bGU6IFwi6aKE5ZGK54mH4oCiUmVcIiwgYXV0aG9yOiBcIlJlYm9yblwifSxcbiAgICBdLFxuICAgIC8vIOS6keerr+W/veeVpeabtOaWsOWIl+ihqO+8jOagvOW8j+aYr0pTT07mlbDnu4TvvIzor7foh6rlt7Horr7nva5cbiAgICByZW1vdGVJZ25vcmVMaXN0VXJsOiBcIlwiLFxuICAgIC8vIOWPguiAg+mTvuaOpe+8mlxuICAgIC8vIGh0dHBzOi8vZ2l0ZWUuY29tL1JlYm9ybl8wL0hpa2VyUnVsZXNEZXBvdC9yYXcvbWFzdGVyL2lnbm9yZVVwZGF0ZVJ1bGVMaXN0Lmpzb25cbiAgICAvLyBodHRwczovL2dpdGVlLmNvbS9xaXVzdW5zaGluZTIzMy9oaWtlclZpZXcvcmF3L21hc3Rlci9ydWxldmVyc2lvbi9SZWJvcm4vaWdub3JlVXBkYXRlUnVsZUxpc3QuanNvblxuXG4gICAgLy8g5Li65omA5pyJ5YiG57G75re75Yqg6K+l5YiG57G75LuT5bqT5pu05paw5Yqf6IO9XG4gICAgLy8g6ZyA6KaB5YOP5oC75LuT5bqT5LiA5qC35Y2V54us55So5LiA5LiqanNvbueuoeeQhu+8jOiHquihjOWhq+WFpeWcsOWdgFxuICAgIHJlbW90ZURlcG90UnVsZVVybDogXCJodHRwczovL2dpdGVlLmNvbS9SZWJvcm5fMC9IaWtlclJ1bGVzRGVwb3QvcmF3L21hc3Rlci91cGRhdGUuanNvblwiLFxuICAgIC8vIOiLpeS4jemcgOimgeabtOaWsOWImeWFs+mXrVxuICAgIHNob3dVcGRhdGVFcnJvclRpcHM6IHRydWUsXG59O1xuXG4vLyDku5PlupPnirbmgIHnvJPlrZjmlofku7blnLDlnYBcbnZhciBzdGF0dXNDYWNoZUZpbGUgPSBcImhpa2VyOi8vZmlsZXMvXCIgKyBtUnVsZS50aXRsZSArIFwiX1wiICsgbVJ1bGUuYXV0aG9yICsgXCIuanNvblwiO1xuLy8g5Li+5L6LIGhpa2VyOi8vZmlsZXMvZGVwb3RTdGF0dXMuanNvblxuXG52YXIgcmVtb3RlSWdub3JlTGlzdCA9IFtdO1xudHJ5IHtcbiAgICBldmFsKFwicmVtb3RlSWdub3JlTGlzdD1cIiArIGZldGNoKHNldHRpbmdzLnJlbW90ZUlnbm9yZUxpc3RVcmwsIHt9KSk7XG59IGNhdGNoIChlKSB7XG59XG5BcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShzZXR0aW5ncy5pZ25vcmVVcGRhdGVSdWxlTGlzdCwgcmVtb3RlSWdub3JlTGlzdCk7XG4vLyBzZXRFcnJvcihKU09OLnN0cmluZ2lmeShpZ25vcmVVcGRhdGVSdWxlTGlzdCkpO1xuXG52YXIgcmVtb3RlUnVsZXNNYXBwaW5nID0gW107XG50cnkge1xuICAgIGV2YWwoXCJyZW1vdGVSdWxlc01hcHBpbmc9XCIgKyBmZXRjaChzZXR0aW5ncy5yZW1vdGVSdWxlc01hcHBpbmdVcmwsIHt9KSk7XG59IGNhdGNoIChlKSB7XG59XG5BcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShzZXR0aW5ncy5ydWxlc01hcHBpbmcsIHJlbW90ZVJ1bGVzTWFwcGluZyk7XG4vLyBzZXRFcnJvcihKU09OLnN0cmluZ2lmeShydWxlc01hcHBpbmcpKTtcblxuLyoqXG4gKiDlj6/lnKjmraTlpIToh6rlrprkuYnku5PlupPvvIzlrp7njrDnp4Hkurrku5PlupNcbiAqXG4gKiDku6VSZWJvcm7ku5PlupPnmoTpk77mjqXkuLrlj4LogINcbiAqXG4gKiBodHRwczovL2dpdGVlLmNvbS9SZWJvcm5fMC9IaWtlclJ1bGVzRGVwb3QvYmxvYi9tYXN0ZXIvdXBkYXRlLmpzb25cbiAqL1xudmFyIGF1dGhvckxpc3QgPSBnZXRVcmwoKS5zcGxpdChcIiNcIilbMV07XG52YXIgYXV0aG9yQW5kT3duZXJBbmRQcm9qZWN0ID0gYXV0aG9yTGlzdC5zcGxpdChcIkBAXCIpO1xudmFyIGF1dGhvciA9IGF1dGhvckFuZE93bmVyQW5kUHJvamVjdFswXTtcbnZhciByZW1vdGVVcmwgPSBcIlwiO1xuXG52YXIgYXBpVHlwZSA9IFwiMVwiOyAgLy8gMCDkuLrmlofku7bnm7Tpk77vvIwxIOS4uueggeS6kUFQSVxudmFyIGFwaVR5cGVKUyA9IGF1dGhvckxpc3QubWF0Y2goL2FwaVR5cGU9LltcXHNcXFNdKj8nLykgKyBcIjtcIjtcbmV2YWwoYXBpVHlwZUpTKTtcbmlmIChhcGlUeXBlID09IG51bGwpIGFwaVR5cGUgPSBcIjFcIjtcblxuaWYgKGFwaVR5cGUgPT0gXCIwXCIpIHtcbiAgICB2YXIgZnVsbFVybCA9IFwiXCI7XG4gICAgdmFyIGZ1bGxVcmxKUyA9IGF1dGhvckxpc3QubWF0Y2goL2Z1bGxVcmw9LltcXHNcXFNdKj8nLykgKyBcIjtcIjtcbiAgICBldmFsKGZ1bGxVcmxKUyk7XG4gICAgcmVtb3RlVXJsID0gZnVsbFVybDtcbn0gZWxzZSBpZiAoYXBpVHlwZSA9PSBcIjFcIikge1xuICAgIHZhciByZW1vdGVBcGlIb21lID0gXCJodHRwczovL2dpdGVlLmNvbS9hcGkvdjUvcmVwb3MvXCI7XG4gICAgdmFyIG93bmVyID0gYXV0aG9yQW5kT3duZXJBbmRQcm9qZWN0WzFdOyAgIC8vIOS7k+W6k+aLpeacieiAhVxuICAgIHZhciByZXBvID0gYXV0aG9yQW5kT3duZXJBbmRQcm9qZWN0WzJdOyAvLyDku5PlupPlkI1cbiAgICB2YXIgcmVtb3RlRmlsZW5hbWUgPSBudWxsOyAvLyDmlofku7blkI1cbiAgICB2YXIgcGF0aCA9IHJlbW90ZUZpbGVuYW1lOyAgLy8g5Zyo5LuT5bqT5Lit5paH5Lu255qE6Lev5b6EXG4gICAgdmFyIGFjY2Vzc190b2tlbiA9IG51bGw7ICAvLyDnlKjmiLfmjojmnYPnoIHvvIzlnKjnoIHkupFcIuiuvue9ruKAlD7lronlhajorr7lrpotPuS4quS6uuiuv+mXruS7pOeJjFwi5Lit5Y+v5Lul55Sf5oiQXG4gICAgdmFyIHRva2VuSlMgPSBhdXRob3JMaXN0Lm1hdGNoKC9hY2Nlc3NfdG9rZW49LltcXHNcXFNdKj8nLykgKyBcIjtcIjtcbiAgICBldmFsKHRva2VuSlMpO1xuICAgIC8vIHNldEVycm9yKGFjY2Vzc190b2tlbj09bnVsbCk7XG4gICAgdmFyIHJlbW90ZUZpbGVuYW1lSlMgPSBhdXRob3JMaXN0Lm1hdGNoKC9yZW1vdGVGaWxlbmFtZT0uW1xcc1xcU10qPycvKSArIFwiO1wiO1xuICAgIGV2YWwocmVtb3RlRmlsZW5hbWVKUyk7XG4gICAgaWYgKHJlbW90ZUZpbGVuYW1lID09IG51bGwpIHtcbiAgICAgICAgcmVtb3RlRmlsZW5hbWUgPSBcInVwZGF0ZS5qc29uXCI7XG4gICAgfVxuICAgIHBhdGggPSByZW1vdGVGaWxlbmFtZTtcbiAgICAvLyBzZXRFcnJvcihyZW1vdGVGaWxlbmFtZSlcbiAgICAvLyBBUEnpk77mjqXlj4LogIPvvJpodHRwczovL2dpdGVlLmNvbS9hcGkvdjUvcmVwb3Mve3tvd25lcn19L3t7cmVwb319L2NvbnRlbnRzL3t7cGF0aH19P2FjY2Vzc190b2tlbj0qKioqXG4gICAgcmVtb3RlVXJsID0gcmVtb3RlQXBpSG9tZSArIG93bmVyICsgXCIvXCIgKyByZXBvICsgXCIvY29udGVudHMvXCIgKyBwYXRoO1xuICAgIGlmIChhY2Nlc3NfdG9rZW4gIT0gbnVsbCkge1xuICAgICAgICByZW1vdGVVcmwgPSByZW1vdGVVcmwgKyBcIj9hY2Nlc3NfdG9rZW49XCIgKyBhY2Nlc3NfdG9rZW47XG4gICAgfVxuICAgIC8vIHNldEVycm9yKHJlbW90ZVVybCk7XG4gICAgLy8gdmFyIHJlbW90ZUhvbWUgPSBcImh0dHBzOi8vZ2l0ZWUuY29tL1wiICsgb3duZXIgKyBcIi9cIiArIHJlcG8gKyBcIi9ibG9iL21hc3Rlci91cGRhdGUuanNvblwiO1xufVxuXG5mdW5jdGlvbiB3cml0ZU9iamVjdFRvRmlsZShmaWxlVXJsLCBvYmplY3QpIHtcbiAgICB3cml0ZUZpbGUoZmlsZVVybCwgSlNPTi5zdHJpbmdpZnkob2JqZWN0KSk7XG59XG5cbi8vIOaKiuaAu+S7k+W6k+eKtuaAgeWGmeWFpeaWh+S7tlxuZnVuY3Rpb24gd3JpdGVEZXBvdFN0YXR1c1RvRmlsZShkZXBvdFN0YXR1cykge1xuICAgIHdyaXRlT2JqZWN0VG9GaWxlKHN0YXR1c0NhY2hlRmlsZSwgZGVwb3RTdGF0dXMpO1xufVxuXG4vLyDoi6XkuI3mmK/nrKzkuIDmrKHkvb/nlKjmgLvku5PlupPliJnpmpDol4/lvIDlj5HmlofmoaNcbnZhciBkZXBvdFN0YXR1cyA9IHt9O1xudmFyIGRlcG90U3RhdHVzRmlsZSA9IGZldGNoKHN0YXR1c0NhY2hlRmlsZSwge30pO1xuaWYgKGRlcG90U3RhdHVzRmlsZSAhPSBcIlwiKSB7XG4gICAgZXZhbChcImRlcG90U3RhdHVzPVwiICsgZGVwb3RTdGF0dXNGaWxlKTtcbn1cblxudmFyIGRlcG90UnVsZXNTdGF0dXMgPSB7XG4gICAgdXBkYXRlTnVtOiAwLFxuICAgIG5vSW1wb3J0TnVtOiAwLFxuICAgIGlnbm9yZU51bTogMCxcbiAgICB1bmtub3duVHlwZU51bTogMFxufTtcblxudmFyIGVudGVyVGV4dCA9IFwiXFxuXFxuXCI7XG5pZiAoc2V0dGluZ3MuY29tcHJlc3NUZXh0ID09IHRydWUpIGVudGVyVGV4dCA9IFwiXFxuXCI7XG5cbmZ1bmN0aW9uIGdldFJ1bGVOb1N5bWJvbHMocnVsZSwgc3ltYm9sTGlzdCkge1xuICAgIGlmIChzZXR0aW5ncy5uZWVkRGVsU3ltYm9sICE9IHRydWUpIHJldHVybiBydWxlO1xuICAgIHZhciBydWxlVGVtcCA9IHJ1bGU7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzeW1ib2xMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBzeW1ib2xSZWcgPSBuZXcgUmVnRXhwKHN5bWJvbExpc3RbaV0sIFwiZ1wiKTtcbiAgICAgICAgcnVsZVRlbXAudGl0bGUgPSBydWxlVGVtcC50aXRsZS5yZXBsYWNlKHN5bWJvbFJlZywgXCJcIik7XG4gICAgfVxuLy9zZXRFcnJvcihKU09OLnN0cmluZ2lmeShydWxlVGVtcCkpO1xuICAgIHJldHVybiBydWxlVGVtcDtcbn1cblxuZnVuY3Rpb24gaXNIaWRlUnVsZShydWxlKSB7XG4gICAgaWYgKHNldHRpbmdzLm5lZWRIaWRlUnVsZSAhPSB0cnVlKSByZXR1cm4gZmFsc2U7XG4gICAgLy8gaWYgKGhpZGVTeW1ib2xzLmxlbmd0aCA9PSAwKSByZXR1cm4gZmFsc2U7XG4gICAgdmFyIHJ1bGVUZW1wID0gcnVsZTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNldHRpbmdzLmhpZGVTeW1ib2xzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChydWxlVGVtcC50aXRsZS5pbmRleE9mKHNldHRpbmdzLmhpZGVTeW1ib2xzW2ldKSAhPSAtMSkgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gZ2V0UnVsZUluQXJyYXkocnVsZXMsIHJ1bGUpIHtcbiAgICBpZiAocnVsZXMgPT0gbnVsbCB8fCBydWxlcy5sZW5ndGggPT0gMCkgcmV0dXJuIG51bGw7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBydWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAocnVsZXNbaV0udGl0bGUgPT0gcnVsZS50aXRsZSAmJiBydWxlc1tpXS5hdXRob3IgPT0gYXV0aG9yKSByZXR1cm4gcnVsZXNbaV07XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBpc0lnbm9yZVVwZGF0ZVJ1bGUocnVsZSkge1xuICAgIGlmIChpc0luQXJyYXkoc2V0dGluZ3MuaWdub3JlVXBkYXRlUnVsZUxpc3QsIHJ1bGUpID09IHRydWUpIHtcbiAgICAgICAgdmFyIGNhY2hlSWdub3JlUnVsZSA9IGdldFJ1bGVJbkFycmF5KGRlcG90U3RhdHVzLmlnbm9yZVVwZGF0ZVJ1bGVMaXN0LCBydWxlKTtcbiAgICAgICAgaWYgKGNhY2hlSWdub3JlUnVsZSA9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoZGVwb3RTdGF0dXMuaWdub3JlVXBkYXRlUnVsZUxpc3QgPT0gbnVsbCkgZGVwb3RTdGF0dXMuaWdub3JlVXBkYXRlUnVsZUxpc3QgPSBbXTtcbiAgICAgICAgICAgIGNhY2hlSWdub3JlUnVsZSA9IHtcbiAgICAgICAgICAgICAgICB0aXRsZTogcnVsZS50aXRsZSxcbiAgICAgICAgICAgICAgICBhdXRob3I6IGF1dGhvcixcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiBydWxlLnZlcnNpb25cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBkZXBvdFN0YXR1cy5pZ25vcmVVcGRhdGVSdWxlTGlzdC5wdXNoKGNhY2hlSWdub3JlUnVsZSk7XG4gICAgICAgICAgICB3cml0ZURlcG90U3RhdHVzVG9GaWxlKGRlcG90U3RhdHVzKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHJ1bGUudmVyc2lvbiAhPSBjYWNoZUlnbm9yZVJ1bGUudmVyc2lvbikge1xuICAgICAgICAgICAgICAgIGNhY2hlSWdub3JlUnVsZS52ZXJzaW9uID0gcnVsZS52ZXJzaW9uO1xuICAgICAgICAgICAgICAgIHdyaXRlRGVwb3RTdGF0dXNUb0ZpbGUoZGVwb3RTdGF0dXMpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiBzZXRJZ25vcmVVcGRhdGVSdWxlKHJ1bGUpIHtcbiAgICBpZiAoaXNJZ25vcmVVcGRhdGVSdWxlKHJ1bGUpID09IHRydWUpIHJ1bGUuaXNJZ25vcmVVcGRhdGUgPSB0cnVlO1xufVxuXG52YXIgcnVsZXMgPSBbXTtcbmV2YWwoXCJydWxlcz1cIiArIGdldFJlc0NvZGUoKSk7XG52YXIgbXlSdWxlcyA9IFtdO1xuZm9yICh2YXIgaSA9IDA7IGkgPCBydWxlcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBydWxlID0gcnVsZXNbaV07XG4gICAgaWYgKHJ1bGUuYXV0aG9yID09IGF1dGhvcikge1xuICAgICAgICBteVJ1bGVzLnB1c2goZ2V0UnVsZU5vU3ltYm9scyhydWxlLCBzZXR0aW5ncy5zeW1ib2xzKSk7XG4gICAgfVxufVxuLy8gc2V0RXJyb3IoSlNPTi5zdHJpbmdpZnkobXlSdWxlcykpO1xuXG4vLyDlpoLmnpzmnKzlnLDmsqHmnInliJnmj5DnpLrlr7zlhaXmlrDop4TliJlcbi8vIOWboOmDqOWIhuaJi+acuuS4jeaUr+aMgWVzNuivreazle+8jOaVheazqOmHiuaOiVxuLyp2YXIgbXlSdWxlc01hcCA9IG5ldyBNYXAoKTtcbm15UnVsZXMubWFwKHJ1bGU9Pntcbm15UnVsZXNNYXAuc2V0KHJ1bGUudGl0bGUsIHRydWUpO1xufSk7XG4vL3NldEVycm9yKG15UnVsZXNNYXAuZ2V0KFwi6IW+6K6v4oCiUmVcIikpOyovXG5cbi8vIOWOn+Wni+aWueazle+8jOavlOi+g+iAl+aXtlxuZnVuY3Rpb24gaXNJbkFycmF5KHJ1bGVzLCBydWxlKSB7XG4gICAgaWYgKHJ1bGVzLmxlbmd0aCA9PSAwKSByZXR1cm4gZmFsc2U7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBydWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAocnVsZXNbaV0udGl0bGUgPT0gcnVsZS50aXRsZSkgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gZ2V0UnVsZUluUnVsZXNXaXRoTWFwcGluZyhydWxlcywgcnVsZSkge1xuICAgIGlmIChydWxlcyA9PSBudWxsIHx8IHJ1bGVzLmxlbmd0aCA9PSAwIHx8IHJ1bGUgPT0gbnVsbCB8fCBydWxlLm1hcHBpbmdUaXRsZSA9PSBudWxsKSByZXR1cm4gbnVsbDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJ1bGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChydWxlc1tpXS5tYXBwaW5nVGl0bGUgIT0gbnVsbCAmJiBydWxlc1tpXS5tYXBwaW5nVGl0bGUgPT0gcnVsZS5tYXBwaW5nVGl0bGUgJiYgcnVsZXNbaV0uYXV0aG9yID09IGF1dGhvcikgcmV0dXJuIHJ1bGVzW2ldO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cblxuZnVuY3Rpb24gaXNJblJ1bGVzV2l0aE1hcHBpbmcocnVsZXMsIHJ1bGUpIHtcbiAgICBpZiAoZ2V0UnVsZUluUnVsZXNXaXRoTWFwcGluZyhydWxlcywgcnVsZSkgIT0gbnVsbCkgcmV0dXJuIHRydWU7XG4gICAgZWxzZSByZXR1cm4gZmFsc2U7XG59XG5cbnZhciBkZXNjID0gZnVuY3Rpb24gKHJ1bGVzLCBydWxlKSB7XG4gICAgaWYgKHJ1bGUgIT0gbnVsbCAmJiBydWxlLnZlcnNpb24gPCAwKSB7XG4gICAgICAgIGRlcG90UnVsZXNTdGF0dXMudW5rbm93blR5cGVOdW0gKz0gMTtcbiAgICAgICAgcmV0dXJuIFwi5LuT5bqT5peg5rOV5qOA5rWL6K+l6KeE5YiZ57G75Z6L77yM6K+34oCY4oCY55yL6KeE5YiZ5pu05paw5pe26Ze04oCZ4oCZXCI7XG4gICAgfVxuICAgIGlmIChpc0luUnVsZXNXaXRoTWFwcGluZyhydWxlcywgcnVsZSkgPT0gdHJ1ZSB8fCBpc0luQXJyYXkocnVsZXMsIHJ1bGUpID09IHRydWUpIHtcbiAgICAgICAgaWYgKHJ1bGUub2xkVmVyc2lvbiAhPSBudWxsICYmIHJ1bGUub2xkVmVyc2lvbiA8IHJ1bGUudmVyc2lvbikge1xuICAgICAgICAgICAgZGVwb3RSdWxlc1N0YXR1cy51cGRhdGVOdW0gKz0gMTtcbiAgICAgICAgICAgIHJldHVybiAoXCLigJjigJjmnInmlrDniYjmnKzvvJpcIiArIHJ1bGUudmVyc2lvbiArIFwi4oCZ4oCZ77yM54K55Ye75a+85YWl5paw54mI5pysXCIpXG4gICAgICAgICAgICAgICAgKyAoXG4gICAgICAgICAgICAgICAgICAgIGVudGVyVGV4dCArIFwiW+abtOaWsOaXpeW/l10gXCJcbiAgICAgICAgICAgICAgICAgICAgKyAoXG4gICAgICAgICAgICAgICAgICAgICAgICBydWxlLnVwZGF0ZVRleHQgPT0gbnVsbCA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCLml6BcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogcnVsZS51cGRhdGVUZXh0XG4gICAgICAgICAgICAgICAgICAgICkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHJ1bGUub2xkVmVyc2lvbiA+IHJ1bGUudmVyc2lvbiA/XG4gICAgICAgICAgICAgICAgXCLigJjigJjllrXvvJ/kuLrllaXkvaDnmoTop4TliJnniYjmnKzmr5TmiJHov5jpq5jvvJ/igJnigJlcIlxuICAgICAgICAgICAgICAgIDogXCLlvZPliY3op4TliJnlt7LmmK/mnIDmlrDniYjvvIzngrnlh7vot7PliLDop4TliJnpobVcIjtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGRlcG90UnVsZXNTdGF0dXMubm9JbXBvcnROdW0gKz0gMTtcbiAgICAgICAgcmV0dXJuIFwi4oCY4oCY5L2g5bCa5pyq5a+85YWl6K+l6KeE5YiZ4oCZ4oCZ77yM54K55Ye75a+85YWlXCI7XG4gICAgfVxufTtcblxudHJ5IHtcbiAgICB2YXIgcmVtb3RlRGVwb3RSdWxlID0ge307XG4gICAgZXZhbChcInJlbW90ZURlcG90UnVsZT1cIiArIGZldGNoKHNldHRpbmdzLnJlbW90ZURlcG90UnVsZVVybCwge30pKTtcbiAgICB2YXIgbG9jYWxEZXBvdFJ1bGUgPSBKU09OLnBhcnNlKGdldFJ1bGUoKSk7XG4gICAgcmVtb3RlRGVwb3RSdWxlID0gcmVtb3RlRGVwb3RSdWxlLmRhdGFbMF07XG4gICAgcmVtb3RlRGVwb3RSdWxlLm9sZFZlcnNpb24gPSBsb2NhbERlcG90UnVsZS52ZXJzaW9uO1xuLy9zZXRFcnJvcihKU09OLnN0cmluZ2lmeShsb2NhbERlcG90UnVsZSkpO1xuLy9zZXRFcnJvcihKU09OLnN0cmluZ2lmeShyZW1vdGVEZXBvdFJ1bGUpKTtcbiAgICBpZiAocmVtb3RlRGVwb3RSdWxlLm9sZFZlcnNpb24gPCByZW1vdGVEZXBvdFJ1bGUudmVyc2lvbikge1xuICAgICAgICBkLnB1c2goe1xuICAgICAgICAgICAgdGl0bGU6IFwi4oCY4oCY5qih5p2/5pyJ5paw54mI5pys77yaXCIgKyByZW1vdGVEZXBvdFJ1bGUudmVyc2lvbiArIFwi4oCZ4oCZ77yM6K+36IGU57O75L2c6ICF5Y675oC75LuT5bqT5pu05pawXCIsXG4vLyByZW1vdGVEZXBvdFJ1bGUudGl0bGUgKyBcIlxcdFwiICsgZGVzYyhydWxlcywgcmVtb3RlRGVwb3RSdWxlKSxcbi8vICAgICAgICAgICAgIHVybDogcmVtb3RlRGVwb3RSdWxlLnJ1bGUgfHwgXCJcIixcbiAgICAgICAgICAgIHVybDogXCJoaWtlcjovL2hvbWVA5oC75LuT5bqTXCIsXG4gICAgICAgICAgICBjb2xfdHlwZTogXCJ0ZXh0X2NlbnRlcl8xXCIsXG4gICAgICAgICAgICAvL2NvbnRlbnQ6IHJlbW90ZURlcG90UnVsZS51cGRhdGVUZXh0LFxuICAgICAgICAgICAgZGVzYzogXCLjgJDmm7TmlrDml6Xlv5fjgJFcXG5cIiArIHJlbW90ZURlcG90UnVsZS51cGRhdGVUZXh0XG4gICAgICAgIH0pO1xuICAgIH1cbn0gY2F0Y2ggKGUpIHtcbiAgICBpZiAoc2V0dGluZ3Muc2hvd1VwZGF0ZUVycm9yVGlwcyA9PSB0cnVlKVxuICAgICAgICBkLnB1c2goe1xuICAgICAgICAgICAgdGl0bGU6IFwi4oCY4oCY5oC75LuT5bqT5pu05paw56iL5bqP5bey5o2f5Z2P4oCZ4oCZXCIsXG4gICAgICAgICAgICBkZXNjOiBcIuivt+iBlOezuyBcIiArIG1SdWxlLmF1dGhvciArIFwiIOS/ruWkjVwiLFxuICAgICAgICAgICAgY29sX3R5cGU6IFwidGV4dF9jZW50ZXJfMVwiLFxuICAgICAgICB9KTtcbn1cblxudmFyIHJlbW90ZVJ1bGVzID0gW107XG4vLyB2YXIgcmVtb3RlVXJsID0gcmVtb3RlQXBpSG9tZSArIGVuY29kZVVSSUNvbXBvbmVudChhdXRob3IpICsgXCIvXCIgKyByZW1vdGVGaWxlbmFtZTtcbnZhciByZW1vdGVTb3VyY2UgPSBmZXRjaChyZW1vdGVVcmwsIHt9KTtcbi8vIHNldEVycm9yKHJlbW90ZVVybCk7XG50cnkge1xuICAgIGV2YWwoXCJyZW1vdGVTb3VyY2U9XCIgKyByZW1vdGVTb3VyY2UpO1xuICAgIGlmIChhcGlUeXBlID09IFwiMFwiKSB7XG4gICAgICAgIHJlbW90ZVJ1bGVzID0gcmVtb3RlU291cmNlO1xuICAgIH0gZWxzZSBpZiAoYXBpVHlwZSA9PSBcIjFcIikge1xuICAgICAgICBldmFsKFwicmVtb3RlUnVsZXM9XCIgKyBiYXNlNjREZWNvZGUocmVtb3RlU291cmNlLmNvbnRlbnQpKTtcbiAgICB9XG4gICAgaWYgKHJlbW90ZVJ1bGVzLmRhdGEgIT0gbnVsbCkge1xuICAgICAgICB2YXIgbm90aWNlID0gcmVtb3RlUnVsZXMubm90aWNlO1xuICAgICAgICBpZiAobm90aWNlICE9IG51bGwpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgKG5vdGljZSkgPT0gXCJzdHJpbmdcIiAmJiBub3RpY2UgIT0gXCJcIikge1xuICAgICAgICAgICAgICAgIGQucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIuS7k+W6k+mAmuefpVwiLFxuICAgICAgICAgICAgICAgICAgICBkZXNjOiBub3RpY2UsXG4gICAgICAgICAgICAgICAgICAgIGNvbF90eXBlOiBcInBpY18xXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIChub3RpY2UpID09IFwib2JqZWN0XCIgJiYgbm90aWNlLmRlc2MgIT0gbnVsbCAmJiBub3RpY2UuZGVzYyAhPSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgZC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IG5vdGljZS50aXRsZSAhPSBudWxsICYmIG5vdGljZS50aXRsZSAhPSBcIlwiID8gbm90aWNlLnRpdGxlIDogXCLku5PlupPpgJrnn6VcIixcbiAgICAgICAgICAgICAgICAgICAgZGVzYzogbm90aWNlLmRlc2MsXG4gICAgICAgICAgICAgICAgICAgIHBpY191cmw6IG5vdGljZS5waWNVcmwsXG4vLyAhPSBudWxsICYmIG5vdGljZS5waWNVcmwgIT0gXCJcIiA/IG5vdGljZS5waWNVcmwgOiBcIlwiLFxuICAgICAgICAgICAgICAgICAgICBjb2xfdHlwZTogXCJwaWNfMVwiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmVtb3RlUnVsZXMgPSByZW1vdGVSdWxlcy5kYXRhO1xuICAgIH1cbn0gY2F0Y2ggKGUpIHtcbn1cbi8vc2V0RXJyb3IocmVtb3RlUnVsZXMubGVuZ3RoKTtcbmlmIChyZW1vdGVSdWxlcy5sZW5ndGggPT0gMCkge1xuICAgIGQucHVzaCh7XG4gICAgICAgIHRpdGxlOiBcIuivpei/nOeoi+S7k+W6k+aXoOaVsOaNru+8gVwiLFxuICAgICAgICBjb2xfdHlwZTogXCJ0ZXh0X2NlbnRlcl8xXCJcbiAgICB9KTtcbiAgICBkLnB1c2goe1xuICAgICAgICB0aXRsZTogXCLor6Xov5znqIvku5PlupPml6DmlbDmja7vvIFcIixcbiAgICAgICAgY29sX3R5cGU6IFwidGV4dF9jZW50ZXJfMVwiXG4gICAgfSk7XG4gICAgZC5wdXNoKHtcbiAgICAgICAgdGl0bGU6IFwi6K+l6L+c56iL5LuT5bqT5peg5pWw5o2u77yBXCIsXG4gICAgICAgIGNvbF90eXBlOiBcInRleHRfY2VudGVyXzFcIlxuICAgIH0pO1xufSBlbHNlIHtcbiAgICAvL3NldEVycm9yKG15UnVsZXMubGVuZ3RoKTtcbiAgICBpZiAobXlSdWxlcy5sZW5ndGggPj0gcmVtb3RlUnVsZXMubGVuZ3RoKSB7XG4gICAgICAgIC8vIOS4jeefpemBk+S8muS4jeS8muaciemXrumimFxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG15UnVsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcmVtb3RlUnVsZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgbG9jYWxSdWxlID0gbXlSdWxlc1tpXTtcbiAgICAgICAgICAgICAgICB2YXIgcmVtb3RlUnVsZSA9IHJlbW90ZVJ1bGVzW2pdO1xuICAgICAgICAgICAgICAgIGlmIChpc0hpZGVSdWxlKHJlbW90ZVJ1bGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbW90ZVJ1bGVzLnNwbGljZShqLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgai0tO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2V0SWdub3JlVXBkYXRlUnVsZShyZW1vdGVSdWxlKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IHNldHRpbmdzLnJ1bGVzTWFwcGluZy5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9pZiAoKGxvY2FsUnVsZS5tYXBwaW5nVGl0bGUgIT0gbnVsbCAmJiByZW1vdGVSdWxlLm1hcHBpbmdUaXRsZSAhPSBudWxsKSB8fCByZW1vdGVSdWxlLmlzTWFwcGVkID09IHRydWUpIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJ1bGVNYXBwaW5nID0gc2V0dGluZ3MucnVsZXNNYXBwaW5nW2tdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxvY2FsUnVsZU1hcHBpbmdUaXRsZSA9IHJ1bGVNYXBwaW5nWzBdLnRpdGxlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlbW90ZVJ1bGVNYXBwaW5nVGl0bGUgPSBydWxlTWFwcGluZ1sxXS50aXRsZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWFqOWQjeaYoOWwhFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxvY2FsUnVsZS50aXRsZSA9PSBsb2NhbFJ1bGVNYXBwaW5nVGl0bGUgJiYgcmVtb3RlUnVsZS50aXRsZSA9PSByZW1vdGVSdWxlTWFwcGluZ1RpdGxlICYmIHJ1bGVNYXBwaW5nWzJdLm1hdGNoQWxsID09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFJ1bGUubWFwcGluZ1RpdGxlID0gcmVtb3RlUnVsZU1hcHBpbmdUaXRsZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdGVSdWxlLm1hcHBpbmdUaXRsZSA9IHJlbW90ZVJ1bGVNYXBwaW5nVGl0bGU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0aXRsZVJlZ2V4ID0gbmV3IFJlZ0V4cChsb2NhbFJ1bGVNYXBwaW5nVGl0bGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsUnVsZS5tYXBwaW5nVGl0bGUgPSBsb2NhbFJ1bGUubWFwcGluZ1RpdGxlICE9IG51bGwgJiYgbG9jYWxSdWxlLm1hcHBpbmdUaXRsZSAhPSBcIlwiID8gbG9jYWxSdWxlLm1hcHBpbmdUaXRsZSA6IGxvY2FsUnVsZS50aXRsZS5tYXRjaCh0aXRsZVJlZ2V4KVswXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZVJlZ2V4ID0gbmV3IFJlZ0V4cChyZW1vdGVSdWxlTWFwcGluZ1RpdGxlLCBcImdcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3RlUnVsZS5tYXBwaW5nVGl0bGUgPSByZW1vdGVSdWxlLnRpdGxlLm1hdGNoKHRpdGxlUmVnZXgpWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxvY2FsUnVsZS5tYXBwaW5nVGl0bGUgPT0gcmVtb3RlUnVsZS5tYXBwaW5nVGl0bGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdGVSdWxlLmxvY2FsVGl0bGUgPSBsb2NhbFJ1bGUudGl0bGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3RlUnVsZS5pc01hcHBlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3RlUnVsZS5vbGRWZXJzaW9uID0gbG9jYWxSdWxlLnZlcnNpb247XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobG9jYWxSdWxlLnRpdGxlID09IHJlbW90ZVJ1bGUudGl0bGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3RlUnVsZS5vbGRWZXJzaW9uID0gbG9jYWxSdWxlLnZlcnNpb247XG4gICAgICAgICAgICAgICAgICAgIC8vcmVtb3RlUnVsZXNbal0ucnVsZT1teVJ1bGVzW2ldLnJ1bGU7XG4gICAgICAgICAgICAgICAgICAgIC8vcmVtb3RlUnVsZXNbal0uZGVzYz1teVJ1bGVzW2ldLmRlc2M7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZW1vdGVSdWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHJlbW90ZVJ1bGUgPSByZW1vdGVSdWxlc1tpXTtcbiAgICAgICAgICAgIGlmICgoaXNIaWRlUnVsZShyZW1vdGVSdWxlKSkpIHtcbiAgICAgICAgICAgICAgICByZW1vdGVSdWxlcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgaS0tO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2V0SWdub3JlVXBkYXRlUnVsZShyZW1vdGVSdWxlKTtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbXlSdWxlcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIHZhciBsb2NhbFJ1bGUgPSBteVJ1bGVzW2pdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgc2V0dGluZ3MucnVsZXNNYXBwaW5nLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL2lmICgobG9jYWxSdWxlLm1hcHBpbmdUaXRsZSAhPSBudWxsICYmIHJlbW90ZVJ1bGUubWFwcGluZ1RpdGxlICE9IG51bGwpIHx8IHJlbW90ZVJ1bGUuaXNNYXBwZWQgPT0gdHJ1ZSkgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcnVsZU1hcHBpbmcgPSBzZXR0aW5ncy5ydWxlc01hcHBpbmdba107XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbG9jYWxSdWxlTWFwcGluZ1RpdGxlID0gcnVsZU1hcHBpbmdbMF0udGl0bGU7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVtb3RlUnVsZU1hcHBpbmdUaXRsZSA9IHJ1bGVNYXBwaW5nWzFdLnRpdGxlO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5YWo5ZCN5pig5bCEXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobG9jYWxSdWxlLnRpdGxlID09IGxvY2FsUnVsZU1hcHBpbmdUaXRsZSAmJiByZW1vdGVSdWxlLnRpdGxlID09IHJlbW90ZVJ1bGVNYXBwaW5nVGl0bGUgJiYgcnVsZU1hcHBpbmdbMl0ubWF0Y2hBbGwgPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsUnVsZS5tYXBwaW5nVGl0bGUgPSByZW1vdGVSdWxlTWFwcGluZ1RpdGxlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW90ZVJ1bGUubWFwcGluZ1RpdGxlID0gcmVtb3RlUnVsZU1hcHBpbmdUaXRsZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRpdGxlUmVnZXggPSBuZXcgUmVnRXhwKGxvY2FsUnVsZU1hcHBpbmdUaXRsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxSdWxlLm1hcHBpbmdUaXRsZSA9IGxvY2FsUnVsZS5tYXBwaW5nVGl0bGUgIT0gbnVsbCAmJiBsb2NhbFJ1bGUubWFwcGluZ1RpdGxlICE9IFwiXCIgPyBsb2NhbFJ1bGUubWFwcGluZ1RpdGxlIDogbG9jYWxSdWxlLnRpdGxlLm1hdGNoKHRpdGxlUmVnZXgpWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlUmVnZXggPSBuZXcgUmVnRXhwKHJlbW90ZVJ1bGVNYXBwaW5nVGl0bGUsIFwiZ1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdGVSdWxlLm1hcHBpbmdUaXRsZSA9IHJlbW90ZVJ1bGUudGl0bGUubWF0Y2godGl0bGVSZWdleClbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobG9jYWxSdWxlLm1hcHBpbmdUaXRsZSA9PSByZW1vdGVSdWxlLm1hcHBpbmdUaXRsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW90ZVJ1bGUubG9jYWxUaXRsZSA9IGxvY2FsUnVsZS50aXRsZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdGVSdWxlLmlzTWFwcGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdGVSdWxlLm9sZFZlcnNpb24gPSBsb2NhbFJ1bGUudmVyc2lvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGxvY2FsUnVsZS50aXRsZSA9PSByZW1vdGVSdWxlLnRpdGxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbW90ZVJ1bGUub2xkVmVyc2lvbiA9IGxvY2FsUnVsZS52ZXJzaW9uO1xuICAgICAgICAgICAgICAgICAgICAvL3JlbW90ZVJ1bGVzW2ldLnJ1bGU9bXlSdWxlc1tqXS5ydWxlO1xuICAgICAgICAgICAgICAgICAgICAvL3JlbW90ZVJ1bGVzW2ldLmRlc2M9bXlSdWxlc1tqXS5kZXNjO1xuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1lcmdlU29ydChhcnIpIHtcbiAgICAgICAgdmFyIGxlbiA9IGFyci5sZW5ndGg7XG4gICAgICAgIGlmIChsZW4gPCAyKSB7XG4gICAgICAgICAgICByZXR1cm4gYXJyO1xuICAgICAgICB9XG4gICAgICAgIHZhciBtaWRkbGUgPSBNYXRoLmZsb29yKGxlbiAvIDIpLFxuICAgICAgICAgICAgbGVmdCA9IGFyci5zbGljZSgwLCBtaWRkbGUpLFxuICAgICAgICAgICAgcmlnaHQgPSBhcnIuc2xpY2UobWlkZGxlKTtcbiAgICAgICAgcmV0dXJuIG1lcmdlKG1lcmdlU29ydChsZWZ0KSwgbWVyZ2VTb3J0KHJpZ2h0KSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbWVyZ2UobGVmdCwgcmlnaHQpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgICB2YXIgaWdub3JlVXBkYXRlTGlzdCA9IFtdO1xuICAgICAgICB2YXIgaXNUaGlzVmVyc2lvbkxpc3QgPSBbXTtcblxuICAgICAgICB3aGlsZSAobGVmdC5sZW5ndGggPiAwICYmIHJpZ2h0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGlmIChsZWZ0WzBdLmlzSWdub3JlVXBkYXRlID09IHRydWUgJiYgbGVmdFswXS5vbGRWZXJzaW9uICE9IGxlZnRbMF0udmVyc2lvbikge1xuICAgICAgICAgICAgICAgIGlnbm9yZVVwZGF0ZUxpc3QucHVzaChsZWZ0LnNoaWZ0KCkpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChyaWdodFswXS5pc0lnbm9yZVVwZGF0ZSA9PSB0cnVlICYmIHJpZ2h0WzBdLm9sZFZlcnNpb24gIT0gcmlnaHRbMF0udmVyc2lvbikge1xuICAgICAgICAgICAgICAgIGlnbm9yZVVwZGF0ZUxpc3QucHVzaChyaWdodC5zaGlmdCgpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobGVmdFswXS5vbGRWZXJzaW9uIDwgbGVmdFswXS52ZXJzaW9uKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gobGVmdC5zaGlmdCgpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmlnaHRbMF0ub2xkVmVyc2lvbiA8IHJpZ2h0WzBdLnZlcnNpb24pIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChyaWdodC5zaGlmdCgpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobGVmdFswXS5vbGRWZXJzaW9uID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChsZWZ0LnNoaWZ0KCkpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChyaWdodFswXS5vbGRWZXJzaW9uID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChyaWdodC5zaGlmdCgpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaXNUaGlzVmVyc2lvbkxpc3QucHVzaChsZWZ0LnNoaWZ0KCkpO1xuICAgICAgICAgICAgICAgIGlzVGhpc1ZlcnNpb25MaXN0LnB1c2gocmlnaHQuc2hpZnQoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB3aGlsZSAoaWdub3JlVXBkYXRlTGlzdC5sZW5ndGgpIHJlc3VsdC5wdXNoKGlnbm9yZVVwZGF0ZUxpc3Quc2hpZnQoKSk7XG5cbiAgICAgICAgd2hpbGUgKGlzVGhpc1ZlcnNpb25MaXN0Lmxlbmd0aCkgcmVzdWx0LnB1c2goaXNUaGlzVmVyc2lvbkxpc3Quc2hpZnQoKSk7XG5cbiAgICAgICAgd2hpbGUgKGxlZnQubGVuZ3RoKVxuICAgICAgICAgICAgcmVzdWx0LnB1c2gobGVmdC5zaGlmdCgpKTtcblxuICAgICAgICB3aGlsZSAocmlnaHQubGVuZ3RoKVxuICAgICAgICAgICAgcmVzdWx0LnB1c2gocmlnaHQuc2hpZnQoKSk7XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICByZW1vdGVSdWxlcyA9IG1lcmdlU29ydChyZW1vdGVSdWxlcyk7XG5cbiAgICB2YXIgcnVsZVJlZyA9IG5ldyBSZWdFeHAoL3tbXl0qLyk7XG4gICAgZnVuY3Rpb24gZ2V0UnVsZUluUmVtb3RlKHJlbW90ZVJ1bGUpIHtcbiAgICAgICAgdmFyIHJlbW90ZVJ1bGVSdWxlID0gbnVsbDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGV2YWwoXCJyZW1vdGVSdWxlUnVsZT1cIiArIGJhc2U2NERlY29kZShyZW1vdGVSdWxlLnJ1bGUucmVwbGFjZShcInJ1bGU6Ly9cIiwgXCJcIikpLm1hdGNoKHJ1bGVSZWcpWzBdKTtcbiAgICAgICAgICAgIGlmKHJlbW90ZVJ1bGUuZ3JvdXAgIT0gbnVsbCAmJiByZW1vdGVSdWxlUnVsZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmVtb3RlUnVsZVJ1bGUuZ3JvdXAgPSByZW1vdGVSdWxlLmdyb3VwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlKSB7IH1cbiAgICAgICAgcmV0dXJuIHJlbW90ZVJ1bGVSdWxlO1xuICAgIH1cblxuICAgIHZhciBpbXBvcnRMaXN0ID0gW107XG4gICAgdmFyIHVwZGF0ZUxpc3QgPSBbXTtcbiAgICB2YXIgaW1wb3J0TGlzdEZpbGUgPSBcImhpa2VyOi8vZmlsZXMvdG1wX2ltcG9ydExpc3QuanNvblwiO1xuICAgIHZhciB1cGRhdGVMaXN0RmlsZSA9IFwiaGlrZXI6Ly9maWxlcy90bXBfdXBkYXRlTGlzdC5qc29uXCI7XG4gICAgZnVuY3Rpb24gZ2VuZXJhdGVIb21lUnVsZXNVcmwocnVsZXMsIGZpbGVuYW1lKSB7XG4gICAgICAgIC8vIOa1t+mYlOinhueVjO+8jOmmlumhtemikemBk+WQiOmbhu+/pWhvbWVfcnVsZV91cmzvv6VcbiAgICAgICAgdmFyIGhvbWVSdWxlc0tleSA9IFwiNXJXMzZaaVU2S2VHNTVXTTc3eU02YWFXNmFHMTZhS1I2WUdUNVpDSTZadUc3NytsYUc5dFpWOXlkV3hsWDNWeWJPKy9wUT09XCI7XG4gICAgICAgIC8vIHNldEVycm9yIChKU09OLnN0cmluZ2lmeShydWxlcykpO1xuICAgICAgICB3cml0ZU9iamVjdFRvRmlsZShmaWxlbmFtZSwgcnVsZXMpO1xuICAgICAgICB2YXIgc3RyID0gYmFzZTY0RGVjb2RlKGhvbWVSdWxlc0tleSkgKyBmaWxlbmFtZTtcbiAgICAgICAgcmV0dXJuIFwicnVsZTovL1wiICsgYmFzZTY0RW5jb2RlKHN0cikucmVwbGFjZSgvXFxuL2csICcnKTtcbiAgICB9XG5cbiAgICB2YXIgc2hvd1J1bGVMaXN0ID0gW107XG4gICAgLy8gc2V0RXJyb3IoSlNPTi5zdHJpbmdpZnkocmVtb3RlUnVsZXMpKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlbW90ZVJ1bGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBqID0gcmVtb3RlUnVsZXNbaV07XG4gICAgICAgIHZhciBydWxlV2l0aE1hcHBpbmcgPSBnZXRSdWxlSW5SdWxlc1dpdGhNYXBwaW5nKHJlbW90ZVJ1bGVzLCBqKTtcbiAgICAgICAgaWYgKHJ1bGVXaXRoTWFwcGluZyAhPSBudWxsICYmIGdldFJ1bGVJblJ1bGVzV2l0aE1hcHBpbmcobXlSdWxlcywgaikpIGogPSBydWxlV2l0aE1hcHBpbmc7XG4gICAgICAgIHZhciByID0ge307XG4gICAgICAgIGlmIChzZXR0aW5ncy5uZWVkQ2hhbmdlU2hvd1R5cGUgPT0gdHJ1ZSAmJiBqLm9sZFZlcnNpb24gIT0gbnVsbCAmJiBqLm9sZFZlcnNpb24gPj0gai52ZXJzaW9uICYmIHJlbW90ZVJ1bGVzLmxlbmd0aCA+IHNldHRpbmdzLnNob3dGdWxsVGV4dE1heClcbiAgICAgICAgICAgIHIuY29sX3R5cGUgPSBzZXR0aW5ncy5vdmVyTWF4U2hvd1R5cGU7XG4gICAgICAgIGlmICgoc2V0dGluZ3Mubm9JZ25vcmVVcGRhdGUgIT0gdHJ1ZSAmJiBqLmlzSWdub3JlVXBkYXRlID09IHRydWUpICYmIChqLm9sZFZlcnNpb24gPT0gbnVsbCB8fCBqLm9sZFZlcnNpb24gPCBqLnZlcnNpb24pKSB7XG4gICAgICAgICAgICBkZXBvdFJ1bGVzU3RhdHVzLmlnbm9yZU51bSArPSAxO1xuICAgICAgICAgICAgci5kZXNjID0gXCLor6Xop4TliJnlt7Llv73nlaXmnKzmrKHmm7TmlrBcIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHIuZGVzYyA9IGRlc2MobXlSdWxlcywgaik7XG4gICAgICAgIH1cbiAgICAgICAgci5kZXNjID0gci5kZXNjICsgKFxuICAgICAgICAgICAgai50aXBzICE9IG51bGwgJiYgai50aXBzICE9IFwiXCIgP1xuICAgICAgICAgICAgICAgIGVudGVyVGV4dCArIFwiVGlwczogXCIgKyBqLnRpcHMgOlxuICAgICAgICAgICAgICAgIFwiXCJcbiAgICAgICAgKTtcbiAgICAgICAgci50aXRsZSA9IGoubWFwcGluZ1RpdGxlICE9IG51bGwgJiYgai5tYXBwaW5nVGl0bGUgIT0gXCJcIiAmJiBqLmlzTWFwcGVkID09IHRydWUgP1xuICAgICAgICAgICAgai5tYXBwaW5nVGl0bGVcbiAgICAgICAgICAgIDogai50aXRsZTtcbiAgICAgICAgci51cmwgPSBqLnZlcnNpb24gPCAwID9cbiAgICAgICAgICAgIGoucnVsZSB8fCBcIlwiXG4gICAgICAgICAgICA6IGlzSW5BcnJheShteVJ1bGVzLCBqKSB8fCBqLmlzTWFwcGVkID09IHRydWUgP1xuICAgICAgICAgICAgICAgIChqLm9sZFZlcnNpb24gIT0gbnVsbCAmJiBqLm9sZFZlcnNpb24gPCBqLnZlcnNpb24gP1xuICAgICAgICAgICAgICAgICAgICAoai5ydWxlIHx8IFwiXCIpXG4gICAgICAgICAgICAgICAgICAgIDogKFwiaGlrZXI6Ly9ob21lQFwiICsgKGoubG9jYWxUaXRsZSAhPSBudWxsICYmIGoubG9jYWxUaXRsZSAhPSBcIlwiID9cbiAgICAgICAgICAgICAgICAgICAgICAgIGoubG9jYWxUaXRsZVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBqLnRpdGxlKSkpXG4gICAgICAgICAgICAgICAgOiAoai5ydWxlIHx8IFwiXCIpO1xuICAgICAgICAvL3IuY29udGVudCA9IGoudXBkYXRlVGV4dDtcbiAgICAgICAgc2hvd1J1bGVMaXN0LnB1c2gocik7XG5cbiAgICAgICAgdmFyIHJ1bGVJblJlbW90ZSA9IGdldFJ1bGVJblJlbW90ZShqKTtcbiAgICAgICAgaWYgKHJ1bGVJblJlbW90ZSAhPW51bGwgKSB7XG4gICAgICAgICAgICBpZihqLm9sZFZlcnNpb24gIT0gbnVsbCAmJiBqLm9sZFZlcnNpb24gPCBqLnZlcnNpb24pIHtcbiAgICAgICAgICAgICAgICB1cGRhdGVMaXN0LnB1c2gocnVsZUluUmVtb3RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGltcG9ydExpc3QucHVzaChydWxlSW5SZW1vdGUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHVwZGF0ZUxpc3QubGVuZ3RoICE9IDApIHtcbiAgICAgICAgZC5wdXNoKHtcbiAgICAgICAgICAgIHRpdGxlOiBcIuKAmOKAmOKAmeKAmTxiPlvoh6rliqjnlJ/miJBd54K55Ye75LiA6ZSu5pu05paw5pys6aG1PC9iPlwiLFxuICAgICAgICAgICAgdXJsOiBnZW5lcmF0ZUhvbWVSdWxlc1VybCh1cGRhdGVMaXN0LCB1cGRhdGVMaXN0RmlsZSksXG4gICAgICAgICAgICBjb2xfdHlwZTogXCJ0ZXh0XzFcIixcbiAgICAgICAgICAgIGRlc2M6IFwi5pu05paw4oCY4oCY5LiN5b2x5ZON5Y6f5YiG57uE4oCZ4oCZ77yM5q2k6aG555Sx5oC75LuT5bqT6Ieq5Yqo55Sf5oiQ4oCY4oCYKOWunumqjOaAp+WKn+iDvSnigJnigJlcXG5cXG7ms6g6IOS7heaUr+aMgeWvvOWFpemmlumhteinhOWIme+8jOWFtuS7luivt+iHquihjOWvvOWFpe+8gVwiXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChpbXBvcnRMaXN0Lmxlbmd0aCAhPSAwKSB7XG4gICAgICAgIGQucHVzaCh7XG4gICAgICAgICAgICB0aXRsZTogXCJb6Ieq5Yqo55Sf5oiQXeeCueWHu+S4gOmUruWvvOWFpeacrOmhtVwiLFxuICAgICAgICAgICAgdXJsOiBnZW5lcmF0ZUhvbWVSdWxlc1VybChpbXBvcnRMaXN0LCBpbXBvcnRMaXN0RmlsZSksXG4gICAgICAgICAgICBjb2xfdHlwZTogXCJwaWNfMVwiLFxuICAgICAgICAgICAgZGVzYzogXCLmraTpobnnlLHmgLvku5PlupPoh6rliqjnlJ/miJDigJjigJgo5a6e6aqM5oCn5Yqf6IO9KeKAmeKAmVxcblxcbuazqDog5LuF5pSv5oyB5a+85YWl6aaW6aG16KeE5YiZ77yM5YW25LuW6K+36Ieq6KGM5a+85YWl77yBXCJcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKHNldHRpbmdzLm5vUnVsZXNOdW0gIT0gdHJ1ZSAmJiBzZXR0aW5ncy5oaWRlQWxsICE9IHRydWUpXG4gICAgICAgIGQucHVzaCh7XG4gICAgICAgICAgICB0aXRsZTogXCI8Yj7or6Xku5PlupPlhbHmnIkg4oCY4oCYXCIgKyByZW1vdGVSdWxlcy5sZW5ndGggKyBcIuKAmeKAmSDmnaHop4TliJk8L2I+XCIgK1xuICAgICAgICAgICAgICAgIFwiIChcIlxuICAgICAgICAgICAgICAgICsgXCLmm7TmlrA64oCY4oCYXCIgKyBkZXBvdFJ1bGVzU3RhdHVzLnVwZGF0ZU51bVxuICAgICAgICAgICAgICAgICsgXCLigJnigJkgIOacquWvvOWFpTrigJjigJhcIiArIGRlcG90UnVsZXNTdGF0dXMubm9JbXBvcnROdW1cbiAgICAgICAgICAgICAgICArIFwi4oCZ4oCZICDlv73nlaU64oCY4oCYXCIgKyBkZXBvdFJ1bGVzU3RhdHVzLmlnbm9yZU51bVxuICAgICAgICAgICAgICAgICsgXCLigJnigJkpXCIsXG4gICAgICAgICAgICBjb2xfdHlwZTogXCJ0ZXh0XzFcIixcbiAgICAgICAgfSk7XG5cbiAgICB3aGlsZSAoc2hvd1J1bGVMaXN0Lmxlbmd0aCkgZC5wdXNoKHNob3dSdWxlTGlzdC5zaGlmdCgpKVxufVxuXG5yZXMuZGF0YSA9IGQ7XG5zZXRIb21lUmVzdWx0KHJlcyk7Iiwic2VhcmNoX3VybCI6Imhpa2VyOi8vaG9tZSMqKiNmeXBhZ2UiLCJ0aXRsZUNvbG9yIjoiI2ZmZjIwYzAwIiwiZ3JvdXAiOiIw77iP4oOj5LuT5bqT6ZuG5ZCIIiwic2VhcmNoRmluZCI6ImpzOlxuXG4vKipcbiAgKiDliIbnsbvku5PlupPopoHnlKjmkJzntKLlip/og73vvIxcbiAgKiDor6Xku5PlupPnrqHnkIblkZjlv4Xpobvoh6rooYzlnKjkuIvmlrlzZXR0aW5ncy5hdXRob3JMaXN06YWN572u5YiG57G76ZO+5o6lXG4gICovXG5cbnZhciByZXMgPSB7fTtcbnZhciBkID0gW107XG5ldmFsKGdldENyeXB0b0pTKCkpO1xudmFyIGtleSA9IGdldFVybCgpLnNwbGl0KFwiI1wiKVsxXTtcbi8vIGtleSA9IFwi5b2x6KeGXCI7XG52YXIgcGFnZSA9IDE7XG50cnkgeyBcbiAgIHBhZ2UgPSBwYXJzZUludChnZXRVcmwoKS5zcGxpdChcIiNcIilbMl0pO1xufVxuY2F0Y2ggKGUpIHsgfVxudmFyIHBhZ2VTaXplID0gcGFnZSAqIDU7XG4vKmQucHVzaCh7XG4gICAgdGl0bGU6IFwicGFnZTogXCIgKyBwYWdlLFxuICAgIGRlc2M6IFwicGFnZVNpemU6IFwiKyBwYWdlU2l6ZSArIFwiIHBhZ2VBZGQ6IFwiKyBwYWdlQWRkXG59KTsqL1xuXG5pZiAoa2V5ICE9IG51bGwgJiYga2V5ICE9IFwiXCIpIHtcbiAgICB2YXIgcmVnRXhwID0gbmV3IFJlZ0V4cChcIlteXSpcIitrZXkrXCJbXl0qXCIpO1xuICAgIC8vIOS7k+W6k+S4quaAp+iuvue9rlxuICAgIHZhciBzZXR0aW5ncyA9IHtcbiAgICAgICAgLy8g5Zyo6L+Z6YeM5re75Yqg5LuT5bqT6YWN572u77yM5Y+v5L2/5pys5Zyw5re75Yqg55qE5LuT5bqT572u6aG2XG4gICAgICAgIGF1dGhvckxpc3Q6IFtcbiAgICAgICAgICAgLy8gXCJb5L6L5a2QXee9rumhtuengeS6uuS7k+W6k0BAUmVib3JuXzBAQEhpa2VyUnVsZXNQcml2YWN5QEBhY2Nlc3NfdG9rZW49JyoqKionXCIsXG4gICAgICAgICAgIC8vIFwiW+S+i+WtkF3oh6rlrprkuYnmlofku7blkI1AQFJlYm9ybl8wQEBIaWtlclJ1bGVzRGVwb3RAQHJlbW90ZUZpbGVuYW1lPSd1cGRhdGVfMS5qc29uJ1wiXG4gICAgICAgIF0sXG4gICAgICAgIC8vIOWcqOi/memHjOa3u+WKoOS7k+W6k+mFjee9ru+8jOWPr+S9v+acrOWcsOa3u+WKoOeahOS7k+W6k+e9ruW6lVxuICAgICAgICBhdXRob3JMaXN0Qm90dG9tOiBbXG4gICAgICAgICAgIC8vIFwiW+S+i+WtkF3nva7lupXmnKzlnLDku5PlupNAQFJlYm9ybl8wQEBIaWtlclJ1bGVzUHJpdmFjeVwiXG4gICAgICAgIF0sXG4gICAgfTtcblxuICAgIC8vIOS8vOS5juWKoOS6huS5i+WQjuaFouS6huW+iOWkmlxuICAgIHZhciBydWxlUmVnID0gbmV3IFJlZ0V4cCgve1teXSovKTtcbiAgICBmdW5jdGlvbiBnZXRSdWxlS2V5V29yZChyZW1vdGVSdWxlKSB7XG4gICAgICAgIHZhciByZW1vdGVSdWxlUnVsZSA9IG51bGw7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGV2YWwoXCJyZW1vdGVSdWxlUnVsZT1cIiArIGJhc2U2NERlY29kZShyZW1vdGVSdWxlLnJ1bGUucmVwbGFjZShcInJ1bGU6Ly9cIiwgXCJcIikpLm1hdGNoKHJ1bGVSZWcpWzBdKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgfVxuICAgICAgICAgICAgdmFyIHJlbW90ZVJ1bGVLZXlXb3JkID0gbnVsbDtcbiAgICAgICAgICAgIGlmKHJlbW90ZVJ1bGVSdWxlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICByZW1vdGVSdWxlS2V5V29yZCA9IHJlbW90ZVJ1bGVSdWxlLnRpdGxlICsgcmVtb3RlUnVsZVJ1bGUudXJsICsgcmVtb3RlUnVsZVJ1bGUuYXV0aG9yO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYocmVtb3RlUnVsZUtleVdvcmQgPT0gbnVsbCkgcmVtb3RlUnVsZUtleVdvcmQgPSByZW1vdGVSdWxlLnRpdGxlO1xuICAgICAgICAgICAgcmV0dXJuIHJlbW90ZVJ1bGVLZXlXb3JkO1xuICAgIH1cblxuICAgIC8vIOaQnOe0ouino+aekOaAnei3r++8mlxuICAgIC8vIOiOt+WPluaQnOe0oumTvuaOpeS4reeahCoq77yM54S25ZCO5b6q546v6YGN5Y6G5q+P5LiA5Liq5LuT5bqT55qE6KeE5YiZ77yM5q2j5YiZ5qih57OK5Yy56YWN5Yiw5LiN5Li656m655qE5bCx5Yqg5YWl5pCc57Si57uT5p6cXG4gICAgdmFyIHJlbW90ZUF1dGhvckxpc3QgPSBbXTtcbiAgICB0cnkge1xuICAgICAgICBldmFsKFwicmVtb3RlQXV0aG9yTGlzdD1cIiArIGZldGNoKHNldHRpbmdzLnJlbW90ZUF1dGhvckxpc3RVcmwsIHt9KSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgIH1cbiAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShzZXR0aW5ncy5hdXRob3JMaXN0LCByZW1vdGVBdXRob3JMaXN0KTtcbiAgICBpZiAoc2V0dGluZ3MuYXV0aG9yTGlzdEJvdHRvbS5sZW5ndGggIT0gMCkgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoc2V0dGluZ3MuYXV0aG9yTGlzdCwgc2V0dGluZ3MuYXV0aG9yTGlzdEJvdHRvbSk7XG5cbiAgICAvLyDnqbrpl7TmjaLml7bpl7QsIG5eMi0+Mm7vvJ/omb3nhLZBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseeWPr+iDveS5n+aYr+S4gOS4qm7vvJ/vvIjkvZPpqozkuIrmsqHmhJ/op4nlv6vlpJrlsJHvvIzmr5Xnq5/pgqPkuKpmZXRjaOWkquWkmuS6hi4uLu+8iVxuICAgIHZhciBtUmVtb3RlUnVsZXMgPSBbXTtcbiAgICAvLyAxLuaLv+WIsOS7k+W6k1xuICAgIGZvciAodmFyIGkgPSAocGFnZS0xKSAqIDU7IGkgPCBzZXR0aW5ncy5hdXRob3JMaXN0Lmxlbmd0aCAmJiBpIDwgcGFnZVNpemU7IGkrKykge1xuICAgICAgIC8vIGlmIChpIDwgcGFnZVNpemUpIGJyZWFrO1xuICAgICAgICB2YXIgYXV0aG9yTGlzdCA9IHNldHRpbmdzLmF1dGhvckxpc3RbaV07XG4gICAgICAgIHZhciBhdXRob3JBbmRPd25lckFuZFByb2plY3QgPSBhdXRob3JMaXN0LnNwbGl0KFwiQEBcIik7XG4gICAgICAgIHZhciBhdXRob3IgPSBhdXRob3JBbmRPd25lckFuZFByb2plY3RbMF07XG4gICAgICAgIHZhciByZW1vdGVVcmwgPSBcIlwiO1xuXG4gICAgICAgIHZhciBhcGlUeXBlID0gXCIxXCI7ICAvLyAwIOS4uuaWh+S7tuebtOmTvu+8jDEg5Li656CB5LqRQVBJXG4gICAgICAgIHZhciBhcGlUeXBlSlMgPSBhdXRob3JMaXN0Lm1hdGNoKC9hcGlUeXBlPS5bXFxzXFxTXSo/Jy8pICsgXCI7XCI7XG4gICAgICAgIGV2YWwoYXBpVHlwZUpTKTtcbiAgICAgICAgaWYgKGFwaVR5cGUgPT0gbnVsbCkgYXBpVHlwZSA9IFwiMVwiO1xuXG4gICAgICAgIGlmIChhcGlUeXBlID09IFwiMFwiKSB7XG4gICAgICAgICAgICB2YXIgZnVsbFVybCA9IFwiXCI7XG4gICAgICAgICAgICB2YXIgZnVsbFVybEpTID0gYXV0aG9yTGlzdC5tYXRjaCgvZnVsbFVybD0uW1xcc1xcU10qPycvKSArIFwiO1wiO1xuICAgICAgICAgICAgZXZhbChmdWxsVXJsSlMpO1xuICAgICAgICAgICAgcmVtb3RlVXJsID0gZnVsbFVybDtcbiAgICAgICAgfSBlbHNlIGlmIChhcGlUeXBlID09IFwiMVwiKSB7XG4gICAgICAgICAgICB2YXIgcmVtb3RlQXBpSG9tZSA9IFwiaHR0cHM6Ly9naXRlZS5jb20vYXBpL3Y1L3JlcG9zL1wiO1xuICAgICAgICAgICAgdmFyIG93bmVyID0gYXV0aG9yQW5kT3duZXJBbmRQcm9qZWN0WzFdOyAgIC8vIOS7k+W6k+aLpeacieiAhVxuICAgICAgICAgICAgdmFyIHJlcG8gPSBhdXRob3JBbmRPd25lckFuZFByb2plY3RbMl07IC8vIOS7k+W6k+WQjVxuICAgICAgICAgICAgdmFyIHJlbW90ZUZpbGVuYW1lID0gbnVsbDsgLy8g5paH5Lu25ZCNXG4gICAgICAgICAgICB2YXIgcGF0aCA9IHJlbW90ZUZpbGVuYW1lOyAgLy8g5Zyo5LuT5bqT5Lit5paH5Lu255qE6Lev5b6EXG4gICAgICAgICAgICB2YXIgYWNjZXNzX3Rva2VuID0gbnVsbDsgIC8vIOeUqOaIt+aOiOadg+egge+8jOWcqOeggeS6kVwi6K6+572u4oCUPuWuieWFqOiuvuWumi0+5Liq5Lq66K6/6Zeu5Luk54mMXCLkuK3lj6/ku6XnlJ/miJBcbiAgICAgICAgICAgIHZhciB0b2tlbkpTID0gYXV0aG9yTGlzdC5tYXRjaCgvYWNjZXNzX3Rva2VuPS5bXFxzXFxTXSo/Jy8pICsgXCI7XCI7XG4gICAgICAgICAgICBldmFsKHRva2VuSlMpO1xuICAgICAgICAgICAgLy8gc2V0RXJyb3IoYWNjZXNzX3Rva2VuPT1udWxsKTtcbiAgICAgICAgICAgIHZhciByZW1vdGVGaWxlbmFtZUpTID0gYXV0aG9yTGlzdC5tYXRjaCgvcmVtb3RlRmlsZW5hbWU9LltcXHNcXFNdKj8nLykgKyBcIjtcIjtcbiAgICAgICAgICAgIGV2YWwocmVtb3RlRmlsZW5hbWVKUyk7XG4gICAgICAgICAgICBpZiAocmVtb3RlRmlsZW5hbWUgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJlbW90ZUZpbGVuYW1lID0gXCJ1cGRhdGUuanNvblwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGF0aCA9IHJlbW90ZUZpbGVuYW1lO1xuICAgICAgICAgICAgLy8gc2V0RXJyb3IocmVtb3RlRmlsZW5hbWUpXG4gICAgICAgICAgICAvLyBBUEnpk77mjqXlj4LogIPvvJpodHRwczovL2dpdGVlLmNvbS9hcGkvdjUvcmVwb3Mve3tvd25lcn19L3t7cmVwb319L2NvbnRlbnRzL3t7cGF0aH19P2FjY2Vzc190b2tlbj0qKioqXG4gICAgICAgICAgICByZW1vdGVVcmwgPSByZW1vdGVBcGlIb21lICsgb3duZXIgKyBcIi9cIiArIHJlcG8gKyBcIi9jb250ZW50cy9cIiArIHBhdGg7XG4gICAgICAgICAgICBpZiAoYWNjZXNzX3Rva2VuICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZW1vdGVVcmwgPSByZW1vdGVVcmwgKyBcIj9hY2Nlc3NfdG9rZW49XCIgKyBhY2Nlc3NfdG9rZW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBzZXRFcnJvcihyZW1vdGVVcmwpO1xuICAgICAgICAgICAgLy8gdmFyIHJlbW90ZUhvbWUgPSBcImh0dHBzOi8vZ2l0ZWUuY29tL1wiICsgb3duZXIgKyBcIi9cIiArIHJlcG8gKyBcIi9ibG9iL21hc3Rlci91cGRhdGUuanNvblwiO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gdmFyIHJlbW90ZVVybCA9IHJlbW90ZUFwaUhvbWUgKyBlbmNvZGVVUklDb21wb25lbnQoYXV0aG9yKSArIFwiL1wiICsgcmVtb3RlRmlsZW5hbWU7XG4gICAgICAgIHZhciByZW1vdGVTb3VyY2UgPSBmZXRjaChyZW1vdGVVcmwsIHt9KTtcbiAgICAgICAgLy8gc2V0RXJyb3IocmVtb3RlVXJsKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGV2YWwoXCJyZW1vdGVTb3VyY2U9XCIgKyByZW1vdGVTb3VyY2UpO1xuICAgICAgICAgICAgdmFyIHJlbW90ZVJ1bGVzID0gcmVtb3RlU291cmNlO1xuICAgICAgICAgICAgaWYgKGFwaVR5cGUgPT0gXCIwXCIpIHtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYXBpVHlwZSA9PSBcIjFcIikge1xuICAgICAgICAgICAgICAgIGV2YWwoXCJyZW1vdGVSdWxlcz1cIiArIGJhc2U2NERlY29kZShyZW1vdGVTb3VyY2UuY29udGVudCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlbW90ZVJ1bGVzLmRhdGEgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KG1SZW1vdGVSdWxlcywgcmVtb3RlUnVsZXMuZGF0YSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KG1SZW1vdGVSdWxlcywgcmVtb3RlU291cmNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qaWYobVJlbW90ZVJ1bGVzLmxlbmd0aCA8IHBhZ2UgKiA4KSB7XG4gICAgICAgICAgICAgICAgIHBhZ2UrKztcbiAgICAgICAgICAgICAgICAgcGFnZVNpemUgPSBwYWdlICogNTtcbiAgICAgICAgICAgICAgICAgcGFnZUFkZCsrO1xuICAgICAgICAgICAgICAgICBwdXRWYXIoe2tleTogJ3BhZ2VBZGQnLCB2YWx1ZTogcGFnZUFkZH0pO1xuICAgICAgICAgICAgfSovXG4gICAgICAgIH1jYXRjaCAoZSkge1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIDIu5ou/5Yiw5Y2V5Liq5LuT5bqT55qE6KeE5YiZ5YiX6KGoXG4gICAgaWYgKG1SZW1vdGVSdWxlcy5sZW5ndGggIT0gMCkge1xuICAgICAgICAvLyDmjaLkuKrplKTlrZDnmoTkuozliIbms5XvvIzkuIDlrpropoHpgY3ljobmiYDmnInmlbDmja7nmoTvvIzov5nmoLfpobblpJrmmK9PKDEvMiBuKe+8jOW/veeVpeW4uOaVsOi/mOaYr08obinvvIznoa7lrp7kvJrlv6vkuIDkuKLkuKLvvIznqbrpl7TmjaLml7bpl7TnmoTnu5PmnpxcbiAgICAgICAgdmFyIGxlZnQgPSAwO1xuICAgICAgICB2YXIgcmlnaHQgPSBtUmVtb3RlUnVsZXMubGVuZ3RoIC0gMTtcbiAgICAgICAgd2hpbGUgKGxlZnQgPD0gcmlnaHQpIHtcbiAgICAgICAgICAgIHZhciByZW1vdGVSdWxlTGVmdCA9IG1SZW1vdGVSdWxlc1tsZWZ0XTtcbiAgICAgICAgICAgIHZhciByZW1vdGVSdWxlUmlnaHQgPSBtUmVtb3RlUnVsZXNbcmlnaHRdO1xuICAgICAgICAgICAgaWYgKHJlZ0V4cC50ZXN0KGdldFJ1bGVLZXlXb3JkKHJlbW90ZVJ1bGVMZWZ0KSkgPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIGQucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiByZW1vdGVSdWxlTGVmdC50aXRsZSxcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBcImh0dHBzOi8vYmFpZHUuY29tI1wiICsgcmVtb3RlUnVsZUxlZnQucnVsZSxcbiAgICAgICAgICAgICAgICAgICAgZGVzYzogcmVtb3RlUnVsZUxlZnQuYXV0aG9yLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBcIuS6keerr+eJiOacrO+8mlwiICsgcmVtb3RlUnVsZUxlZnQudmVyc2lvblxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlZ0V4cC50ZXN0KGdldFJ1bGVLZXlXb3JkKHJlbW90ZVJ1bGVSaWdodCkpID09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBkLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogcmVtb3RlUnVsZVJpZ2h0LnRpdGxlLFxuICAgICAgICAgICAgICAgICAgICB1cmw6IFwiaHR0cHM6Ly9iYWlkdS5jb20jXCIgKyByZW1vdGVSdWxlUmlnaHQucnVsZSxcbiAgICAgICAgICAgICAgICAgICAgZGVzYzogcmVtb3RlUnVsZVJpZ2h0LmF1dGhvcixcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogXCLkupHnq6/niYjmnKzvvJpcIiArIHJlbW90ZVJ1bGVSaWdodC52ZXJzaW9uXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZWZ0Kys7XG4gICAgICAgICAgICByaWdodC0tO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5pZigocGFnZSkgKiA1IDwgc2V0dGluZ3MuYXV0aG9yTGlzdC5sZW5ndGgpIHtcbiAgICBpZihkLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICBkLnB1c2goe1xuICAgICAgICAgICAgIHRpdGxlOiBcIuayoeWKoOi9veWIsOS4nOilv++8n+S4jeimgee0p++8jOS4iua7keWPr+iDveacieaDiuWWnOWTpu+8gVwiLFxuICAgICAgICAgICAgIGRlc2M6IFwiUFM6IOWPquimgeayoeaYvuekuuacgOWQjuS4gOmhteWwsei/mOacieW4jOacm++8gVwiXG4gICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAgZC5wdXNoKHtcbiAgICAgICAgICAgICB0aXRsZTogXCLmnKrliLDmnIDlkI7kuIDpobXvvIzor7fnu6fnu63kuIrmu5HliqDovb3mm7TlpJrjgIJcIlxuICAgICAgICAgfSk7XG4gICAgfVxufSBlbHNlIHtcbiAgICAgZC5wdXNoKHtcbiAgICAgICAgIHRpdGxlOiBcIuW3suWIsOacgOWQjuS4gOmhtVwiXG4gICAgIH0pO1xufVxuXG4vLyBzZXRFcnJvcihKU09OLnN0cmluZ2lmeShkKSk7XG5yZXMuZGF0YSA9IGQ7XG5zZXRTZWFyY2hSZXN1bHQocmVzKTsiLCJkZXRhaWxfY29sX3R5cGUiOiJtb3ZpZV8xIiwiZGV0YWlsX2ZpbmRfcnVsZSI6IiIsInNkZXRhaWxfY29sX3R5cGUiOiJ0ZXh0X2NlbnRlcl8xIiwic2RldGFpbF9maW5kX3J1bGUiOiJqczpcbnZhciByZXMgPSB7fTtcbnZhciBkID0gW107XG5cbnZhciBydWxlID0gZ2V0VXJsKCkuc3BsaXQoXCIjXCIpWzFdO1xuaWYocnVsZSAhPSBudWxsICYmIHJ1bGUgIT0gXCJcIikge1xuICAgICBkLnB1c2goe1xuICAgICAgICAgIHRpdGxlOiBcIueri+WNs+WvvOWFpeinhOWImVwiLFxuICAgICAgICAgIHVybDogcnVsZVxuICAgICB9KTtcbn1cblxucmVzLmRhdGEgPSBkO1xuc2V0SG9tZVJlc3VsdChyZXMpOyJ9"
}
